<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keur Doctor - Plateforme Médicale Intelligente</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #1a73e8;
            --secondary-color: #4285f4;
            --accent-color: #34a853;
            --light-bg: #ffffff;
            --dark-text: #202124;
        }

        body {
            font-family: 'Montserrat', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8fafc;
            color: var(--dark-text);
            padding-top: 70px;
        }

        .navbar {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 15px 0;
        }

        .navbar-brand {
            font-weight: 700;
            color: var(--primary-color) !important;
            font-size: 1.5rem;
        }

        .navbar-brand img {
            height: 40px;
            margin-right: 10px;
        }

        .nav-link {
            color: var(--dark-text) !important;
            font-weight: 500;
            margin: 0 10px;
        }

        .nav-link:hover {
            color: var(--primary-color) !important;
        }

        .btn-login {
            background-color: var(--primary-color);
            color: white !important;
            border-radius: 20px;
            padding: 8px 20px !important;
            font-weight: 500;
        }

        .btn-login:hover {
            background-color: #0d5bba;
        }

        .hero-section {
            position: relative;
            min-height: calc(100vh - 70px);
            display: flex;
            align-items: center;
            overflow: hidden;
        }

        .hero-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

<<<<<<< HEAD
        .hero-bg-img {
            position: absolute;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            object-fit: cover;
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(26, 115, 232, 0.6) 0%, rgba(66, 133, 244, 0.4) 100%);
            z-index: -1;
        }

        .welcome-container {
            position: relative;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            text-align: center;
            color: white;
            padding: 0 20px;
        }

        .welcome-heading {
            font-weight: 800;
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.4);
            letter-spacing: 0.5px;
            animation: fadeIn 0.8s ease-out;
        }

        .health-tips-text {
            background-color: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 2.5rem;
            max-width: 800px;
            margin: 0 auto;
            font-size: 1.3rem;
            line-height: 1.7;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.25);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
            animation: slideUp 0.8s ease-out;
        }

        .health-tip-title {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: white;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            display: inline-block;
            padding-bottom: 10px;
        }

        .health-tip-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background-color: white;
        }

        .health-tip-content {
            margin-bottom: 1.5rem;
        }

        .description-section {
            background-color: white;
            padding: 4rem 0;
            border-top: 1px solid #eee;
        }

        .description-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .feature-icon {
            color: var(--primary-color);
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }

        .hero-bg-img {
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .hero-bg-img.active {
            opacity: 1;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .welcome-heading {
                font-size: 2.5rem;
            }

            .health-tips-text {
                font-size: 1.1rem;
                padding: 1.8rem;
            }

            .health-tip-title {
                font-size: 1.6rem;
            }
=======
        .role-button {
            transition: all 0.3s ease;
        }

        .role-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .alert-bloque {
            border-left: 4px solid #dc3545;
            background-color: #f8d7da;
>>>>>>> ce737485fc5282521a7973d893496f32ae35fa49
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
</head>

<body>
<<<<<<< HEAD
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-heartbeat me-2" style="color: #1a73e8;"></i>
                Keur Doctor
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="fas fa-home me-1"></i> Accueil</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="fas fa-user-md me-1"></i> Médecins</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="fas fa-hospital me-1"></i> Établissements</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="fas fa-info-circle me-1"></i> À propos</a>
                    </li>
                </ul>
                <div class="d-flex">
                    {% if user.is_authenticated %}
                    <a href="{% url 'redirection_role' %}" class="btn btn-primary btn-login">
                        <i class="fas fa-tachometer-alt me-1"></i> Mon espace
                    </a>
                    <form method="post" action="{% url 'custom_logout' %}" class="ms-2">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-outline-danger btn-login">
                            <i class="fas fa-sign-out-alt me-1"></i> Déconnexion
                        </button>
                    </form>
                    {% else %}
                    <a href="{% url 'oidc_authentication_init' %}" class="btn btn-primary btn-login me-2">
                        <i class="fas fa-sign-in-alt me-1"></i> Connexion
                    </a>
                    <a href="{% url 'licence' %}" class="btn btn-outline-success btn-login">
                        <i class="fas fa-user-plus me-1"></i> Inscription
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section avec fond animé -->
    <div class="hero-section">
        <!-- Fond animé avec images spécifiques -->
        <div class="hero-bg">
            <!-- Nutrition -->
            <div class="hero-bg-img active" data-tip="nutrition"
                style="background-image: url('https://images.unsplash.com/photo-1490645935967-10de6ba17061?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80');">
            </div>
            <!-- Activité -->
            <div class="hero-bg-img" data-tip="activite"
                style="background-image: url('https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80');">
            </div>
            <!-- Sommeil -->
            <div class="hero-bg-img" data-tip="sommeil"
                style="background-image: url('https://images.unsplash.com/photo-1545205597-3d9d02c29597?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80');">
            </div>
            <!-- Hydratation -->
            <div class="hero-bg-img" data-tip="hydratation"
                style="background-image: url('https://images.unsplash.com/photo-1550583724-b2692b85b150?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80');">
            </div>
            <!-- Prévention -->
            <div class="hero-bg-img" data-tip="prevention"
                style="background-image: url('https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80');">
            </div>
            <!-- Santé mentale -->
            <div class="hero-bg-img" data-tip="mental"
                style="background-image: url('https://images.unsplash.com/photo-1497250681960-ef046c08a56e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80');">
            </div>
        </div>
        <!-- Overlay coloré léger -->
        <div class="hero-overlay"></div>
        <div class="container welcome-container">
            <!-- Titre principal -->
            <h1 class="welcome-heading">Bienvenue sur Keur Doctor</h1>
            <!-- Conseils enrichis avec correspondance image-conseil -->
            <div class="health-tips-text">
                <!-- Nutrition -->
                <div id="nutrition-tip">
                    <h3 class="health-tip-title">Nutrition Équilibrée</h3>
                    <div class="health-tip-content">
                        <p>Une alimentation saine repose sur 3 principes :</p>
                        <ul style="text-align: left; display: inline-block; list-style-type: none;">
                            <li><i class="fas fa-check-circle me-2"></i> 5 portions de fruits/légumes par jour</li>
                            <li><i class="fas fa-check-circle me-2"></i> Limiter les graisses saturées et sucres</li>
                            <li><i class="fas fa-check-circle me-2"></i> Privilégier les céréales complètes</li>
                        </ul>
                        <p class="mt-3">Variez les couleurs dans votre assiette pour un apport vitaminique complet.</p>
                    </div>
                </div>
                <!-- Activité physique -->
                <div id="activite-tip" style="display: none;">
                    <h3 class="health-tip-title">Activité Physique</h3>
                    <div class="health-tip-content">
                        <p>Pour une santé optimale :</p>
                        <ul style="text-align: left; display: inline-block; list-style-type: none;">
                            <li><i class="fas fa-running me-2"></i> 150 min d'activité modérée/semaine</li>
                            <li><i class="fas fa-dumbbell me-2"></i> 2 séances de renforcement musculaire</li>
                            <li><i class="fas fa-walking me-2"></i> Réduire la sédentarité</li>
                        </ul>
                        <p class="mt-3">La régularité prime sur l'intensité. Trouvez une activité qui vous plaît !</p>
                    </div>
                </div>
                <!-- Sommeil -->
                <div id="sommeil-tip" style="display: none;">
                    <h3 class="health-tip-title">Sommeil Réparateur</h3>
                    <div class="health-tip-content">
                        <p>Les clés d'un bon sommeil :</p>
                        <ul style="text-align: left; display: inline-block; list-style-type: none;">
                            <li><i class="fas fa-bed me-2"></i> 7-9h de sommeil par nuit</li>
                            <li><i class="fas fa-moon me-2"></i> Routine régulière de coucher</li>
                            <li><i class="fas fa-mobile-alt me-2"></i> Éviter les écrans 1h avant</li>
                        </ul>
                        <p class="mt-3">Un sommeil de qualité améliore la mémoire, l'humeur et l'immunité.</p>
                    </div>
                </div>
                <!-- Hydratation -->
                <div id="hydratation-tip" style="display: none;">
                    <h3 class="health-tip-title">Hydratation</h3>
                    <div class="health-tip-content">
                        <p>Bien s'hydrater c'est :</p>
                        <ul style="text-align: left; display: inline-block; list-style-type: none;">
                            <li><i class="fas fa-tint me-2"></i> 1.5L à 2L d'eau par jour</li>
                            <li><i class="fas fa-glass-whiskey me-2"></i> Plus en cas de chaleur/sport</li>
                            <li><i class="fas fa-leaf me-2"></i> Limiter café/alcool</li>
                        </ul>
                        <p class="mt-3">L'eau représente 60% de notre corps. Une hydratation suffisante prévient fatigue
                            et maux de tête.</p>
                    </div>
                </div>
                <!-- Prévention -->
                <div id="prevention-tip" style="display: none;">
                    <h3 class="health-tip-title">Prévention Santé</h3>
                    <div class="health-tip-content">
                        <p>Les gestes préventifs essentiels :</p>
                        <ul style="text-align: left; display: inline-block; list-style-type: none;">
                            <li><i class="fas fa-syringe me-2"></i> Vaccins à jour</li>
                            <li><i class="fas fa-calendar-check me-2"></i> Bilans réguliers</li>
                            <li><i class="fas fa-hand-holding-water me-2"></i> Hygiène des mains</li>
                        </ul>
                        <p class="mt-3">La prévention permet de détecter précocement les problèmes et de maintenir une
                            bonne santé à long terme.</p>
                    </div>
                </div>
                <!-- Santé mentale -->
                <div id="mental-tip" style="display: none;">
                    <h3 class="health-tip-title">Santé Mentale</h3>
                    <div class="health-tip-content">
                        <p>Prenez soin de votre esprit :</p>
                        <ul style="text-align: left; display: inline-block; list-style-type: none;">
                            <li><i class="fas fa-brain me-2"></i> Pratiquez la méditation</li>
                            <li><i class="fas fa-users me-2"></i> Entretenez vos relations</li>
                            <li><i class="fas fa-spa me-2"></i> Gérez votre stress</li>
                        </ul>
                        <p class="mt-3">La santé mentale est aussi importante que la santé physique. N'hésitez pas à
                            demander de l'aide si besoin.</p>
                    </div>
                </div>
=======
    <div class="welcome-container">
        <div class="welcome-card text-center">
            <h1 class="mb-4">Bienvenue sur Keur Doctor</h1>
            <p class="mb-4">Plateforme médicale sécurisée pour professionnels et patients</p>

            {% if messages %}
            {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
            {% endfor %}
            {% endif %}

            {% if user.is_authenticated %}
            {% if user.est_bloque %}
            <div class="alert alert-danger alert-bloque">
                <h5><i class="fas fa-ban me-2"></i>Compte bloqué</h5>
                <p class="mb-2">Votre compte a été bloqué pour des raisons de sécurité.</p>
                <small class="text-muted">
                    <strong>Raison:</strong> {{ user.raison_blocage }}<br>
                    <strong>Date de blocage:</strong> {{ user.date_blocage|date:"d/m/Y H:i" }}<br>
                    {% if user.bloque_par_admin %}
                    <strong>Bloqué par:</strong> {{ user.bloque_par_admin.email }}
                    {% endif %}
                </small>
                <hr>
                <p class="mb-0"><strong>Contactez l'administrateur pour débloquer votre compte.</strong></p>
            </div>
            {% else %}
            <div class="alert alert-success">
                <h5><i class="fas fa-check-circle me-2"></i>Connexion réussie</h5>
                <p class="mb-2">Vous êtes connecté en tant que <strong>{{ user.email }}</strong></p>
                {% if user.role_autorise %}
                <p class="mb-0"><strong>Rôle autorisé:</strong> {{ user.get_role_autorise_display }}</p>
                {% endif %}
            </div>
            <a href="{% url 'redirection_role' %}" class="btn btn-primary btn-lg">
                <i class="fas fa-tachometer-alt me-2"></i>
                Accéder à mon dashboard
            </a>
            <form method="post" action="{% url 'custom_logout' %}" class="mt-3">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-danger">
                    <i class="fas fa-sign-out-alt me-2"></i>
                    Se déconnecter
                </button>
            </form>
            {% endif %}
            {% else %}
            <div class="mb-3">
                <p class="text-muted">Connectez-vous selon votre profil pour accéder à vos services médicaux</p>
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i>
                    <strong>Important:</strong> Choisissez le bon rôle. Une tentative de connexion avec un rôle
                    incorrect entraînera le blocage de votre compte.
                </div>
            </div>
            <div class="d-grid gap-2">
                <button class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#roleModal">
                    <i class="fas fa-sign-in-alt me-2"></i>
                    Se connecter avec Keycloak
                </button>
                <a href="{% url 'inscription' %}" class="btn btn-outline-success btn-lg">
                    <i class="fas fa-user-plus me-2"></i>
                    Créer un compte
                </a>
>>>>>>> ce737485fc5282521a7973d893496f32ae35fa49
            </div>
        </div>
    </div>
<<<<<<< HEAD
    <!-- Section description en bas -->
    <section class="description-section">
        <div class="container">
            <div class="description-content">
                <h2 class="mb-4" style="font-weight: 700; color: var(--primary-color);">Keur Doctor</h2>
                <p class="lead" style="font-size: 1.3rem;">
                    Votre plateforme médicale complète pour une santé optimale. Accès à des professionnels qualifiés,
                    des conseils personnalisés et un suivi médical sécurisé.
                </p>
                <div class="row mt-5">
                    <div class="col-md-4">
                        <i class="fas fa-lock feature-icon"></i>
                        <h4 style="font-weight: 600;">Sécurité</h4>
                        <p>Données médicales cryptées et protégées selon les normes les plus strictes.</p>
                    </div>
                    <div class="col-md-4">
                        <i class="fas fa-clock feature-icon"></i>
                        <h4 style="font-weight: 600;">Disponible 24/7</h4>
                        <p>Accès permanent à vos documents et professionnels de santé.</p>
                    </div>
                    <div class="col-md-4">
                        <i class="fas fa-user-md feature-icon"></i>
                        <h4 style="font-weight: 600;">Expertise</h4>
                        <p>Réseau de professionnels qualifiés et expérimentés à votre service.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Animation du fond d'images avec synchronisation des conseils (3s)
        const bgImages = document.querySelectorAll('.hero-bg-img');
        let currentBg = 0;
        const tips = ['nutrition', 'activite', 'sommeil', 'hydratation', 'prevention', 'mental'];
        const tipDuration = 3000; // 3 secondes par conseil
        function showTip(tipIndex) {
            // Masquer tous les conseils
            tips.forEach(tip => {
                document.getElementById(`${tip}-tip`).style.display = 'none';
            });
            // Afficher le conseil correspondant
            document.getElementById(`${tips[tipIndex]}-tip`).style.display = 'block';
        }
        function animateBackground() {
            // Masquer toutes les images
            bgImages.forEach(img => img.classList.remove('active'));
            // Afficher l'image courante
            bgImages[currentBg].classList.add('active');
            // Afficher le conseil correspondant
            showTip(currentBg);
            // Passer à l'image suivante
            currentBg = (currentBg + 1) % bgImages.length;
            setTimeout(animateBackground, tipDuration);
        }
        // Démarrer l'animation après le chargement
        window.addEventListener('load', () => {
            // Initialiser la première image et le premier conseil
            bgImages[0].classList.add('active');
            showTip(0);
            // Démarrer l'animation
            setTimeout(animateBackground, tipDuration);
        });
=======

    <!-- Modal Bootstrap pour la sélection du rôle -->
    <div class="modal fade" id="roleModal" tabindex="-1" aria-labelledby="roleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="roleModalLabel">
                        <i class="fas fa-user-shield me-2"></i>
                        Choisissez votre rôle
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center">
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Attention:</strong> Assurez-vous de choisir le bon rôle. Une tentative de connexion avec
                        un rôle incorrect entraînera le blocage automatique de votre compte.
                    </div>
                    <p>Connectez-vous selon votre profil pour accéder à l'espace qui vous est dédié sur KeurDoctor.</p>
                    <div class="d-grid gap-3">
                        <button class="btn btn-outline-success btn-lg role-button"
                            onclick="seConnecterAvecRole('medecin')">
                            <i class="fas fa-user-md me-2"></i>
                            <strong>Médecin</strong>
                            <br><small class="text-muted">Accès aux outils médicaux et patients</small>
                        </button>
                        <button class="btn btn-outline-primary btn-lg role-button"
                            onclick="seConnecterAvecRole('admin')">
                            <i class="fas fa-user-shield me-2"></i>
                            <strong>Administrateur</strong>
                            <br><small class="text-muted">Gestion complète du système</small>
                        </button>
                        <button class="btn btn-outline-info btn-lg role-button"
                            onclick="seConnecterAvecRole('patient')">
                            <i class="fas fa-user-injured me-2"></i>
                            <strong>Patient</strong>
                            <br><small class="text-muted">Accès aux informations personnelles</small>
                        </button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>
                        Annuler
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Formulaire caché pour le CSRF token -->
    <form id="csrf-form" style="display:none;">{% csrf_token %}</form>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function seConnecterAvecRole(role) {
            fetch('/api/set-role/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': document.querySelector('#csrf-form [name=csrfmiddlewaretoken]').value
                },
                body: JSON.stringify({ role: role })
            })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        window.location.href = `/oidc/authenticate/?role=${role}`;
                    } else {
                        alert('Erreur lors de la configuration du rôle: ' + data.error);
                    }
                })
                .catch(error => {
                    window.location.href = `/oidc/authenticate/?role=${role}`;
                });
        }
>>>>>>> ce737485fc5282521a7973d893496f32ae35fa49
    </script>
</body>

</html>